# Not used. We will "aws-storage-workflow-controller-configmap" instead, which should be defined in advance

apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-controller-configmap
data:
  config: |
    {
    namespace: $(kfp-namespace),
    executorImage: gcr.io/ml-pipeline/argoexec:v2.7.5-license-compliance,
    containerRuntimeExecutor: $(kfp-container-runtime-executor),
    artifactRepository:
    {
        s3: {
            bucket: $(s3Bucket),
            keyPrefix: artifacts,
            endpoint: s3.amazonaws.com,
            insecure: false,
            region: $(s3Region),
            accessKeySecret: {
                name: aws-storage-secret,
                key: s3_access_key
            },
            secretKeySecret: {
                name: aws-storage-secret,
                key: s3_secret_key
            }
        },
        archiveLogs: true
      }
    }
